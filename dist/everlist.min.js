/**
 *  v0.1.0
 *
 * Copyright (c) 2014Bruno Abrantes <hello@brunoabrantes.com> (http://brunoabrantes.com/)
 * Distributed under MIT License
 *
 * Documentation and full license available at:
 * https://github.com/inf0rmer/everlist
 *
 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.everlist=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./utilities"),d=a("./item"),e=function(){function a(a,b){if(a&&!c.isArray(a))throw new Error('"items" should be an array');this.items=[],a&&this.addObjects(a),this.options=b||{}}return a.prototype.addObject=function(a){var b=new d(a);this.items.push(b)},a.prototype.addObjects=function(a){a.forEach(c.bind(this.addObject,this))},a.prototype.numberOfItems=function(){return this.items.length},a.prototype.itemAtIndex=function(a){return this.items[a]},a.prototype.load=function(a){a&&"function"==typeof a&&a()},a}();b.exports=e},{"./item":3,"./utilities":5}],2:[function(a,b){var c=a("./utilities"),d=a("./datasource"),e=a("./renderer"),f=function(){function a(a,c){this.$el=$(a),this.options=$.extend({},b,c),this.options.datasource instanceof d||(this.options.datasource=new d),this.options.renderer instanceof e||(this.options.renderer=new e),this.initialized=!0,f(this.$el),this.startMonitoring(),this.options.renderOnInit&&this.renderNeeded(),0===this.options.datasource.items.length&&this._load()}var b,f,g,h,i;return b={padding:0,interval:350,renderOnInit:!1,renderAtMost:10},f=function(a){a.html("<div class='everlist-inner' />")},g=function(a){return a.filter(function(a){return!a.rendered})},h=function(a){a.forEach(function(a){a.rendered=!0})},i=function(a){return a.some(function(a){return!a.rendered})},a.prototype.startMonitoring=function(){c.debounce(this.monitor,this.options.timeout);this.$el.on("scroll.everlist",c.bind(this.monitor,this))},a.prototype.monitor=function(){var a,b,c;c=this.$el.find(".everlist-inner").first(),a=c.outerHeight(),b=this.$el.height()+this.$el.scrollTop(),!this.loading&&b+this.options.padding>=a&&this._load()},a.prototype._load=function(){i(this.options.datasource.items)?this.renderNeeded():this.options.datasource.load(c.bind(this.renderNeeded,this))},a.prototype.renderNeeded=function(){var a,b;a=g(this.options.datasource.items).slice(0,this.options.renderAtMost),h(a),b=this.options.renderer.renderBatch(a.map(function(a){return a.data})),this.$el.find(".everlist-inner").append(b),$(this).trigger("rendered",[$(b)])},a.prototype.destroy=function(){var a;this.$el.off(".everlist"),this.$el.removeData("everlist"),a=this.$el.find(".everlist-inner"),a.children().length?a.children().unwrap():a.remove()},a.Datasource=d,a.Renderer=e,a}();$.fn.everlist=function(a){this.each(function(){var b,c;b=$(this),c=b.data("everlist")||{},c.initialized||b.data("everlist",c=new f(b,a)),"string"==typeof a&&c[a]()})},b.exports=f},{"./datasource":1,"./renderer":4,"./utilities":5}],3:[function(a,b){var c=function(){function a(a){this.rendered=!1,this.data=a}return a}();b.exports=c},{}],4:[function(a,b){var c=a("./utilities"),d=function(){function a(a){this.template=c.template(a||"<li><%= item %></li>")}return a.prototype.render=function(a){return this.template({item:a})},a.prototype.renderBatch=function(a){return c.reduce(a,c.bind(function(a,b){return a+=this.render(b)},this),"")},a}();b.exports=d},{"./utilities":5}],5:[function(a,b){var c=(Date.now||function(){return(new Date).getTime()},function(a,b,c){}),d=function(){},e=Array.prototype.slice,f=function(a,b){var c,f,g=Function.prototype.bind;if(g&&a.bind===g)return g.apply(a,e.call(arguments,1));if("function"!=typeof a)throw new TypeError;return c=e.call(arguments,2),f=function(){if(!(this instanceof f))return a.apply(b,c.concat(e.call(arguments)));d.prototype=a.prototype;var g=new d;d.prototype=null;var h=a.apply(g,c.concat(e.call(arguments)));return Object(h)===h?h:g}},g=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=Array.prototype.reduce,i=function(a,b){if(h)return h.apply(a,e.call(arguments,1));if(null===a||"undefined"==typeof a)throw new TypeError("reduce called on null or undefined");if("function"!=typeof b)throw new TypeError(b+" is not a function");var c,d=Object(a),f=d.length>>>0,g=0;if(arguments.length>=2)c=arguments[1];else{for(;f>g&&!(g in d);)g++;if(g>=f)throw new TypeError("Reduce of empty array with no initial value");c=d[g++]}for(;f>g;g++)g in d&&(c=b(c,d[g],g,d));return c},j=function(){var a={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},b=/.^/,c={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var d in c)c[c[d]]=d;var e=/\\|'|\r|\n|\t|\u2028|\u2029/g;return function(d,f,g){a.variable=g;var h="__p+='"+d.replace(e,function(a){return"\\"+c[a]}).replace(a.escape||b,function(a,b){return"'+\n_.escape("+unescape(b)+")+\n'"}).replace(a.interpolate||b,function(a,b){return"'+\n("+unescape(b)+")+\n'"}).replace(a.evaluate||b,function(a,b){return"';\n"+unescape(b)+"\n;__p+='"})+"';\n";a.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+h+"return __p;\n";var i=new Function(a.variable||"obj",h);if(f)return i(f);var j=function(a){return i.call(this,a)};return j.source="function("+(a.variable||"obj")+"){\n"+h+"}",j}}();b.exports={debounce:c,bind:f,isArray:g,template:j,reduce:i}},{}]},{},[2])(2)});